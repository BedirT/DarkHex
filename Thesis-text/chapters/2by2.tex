\section{Number of games for 2x2 board}

How many possible games are there for Dark Hex games? What will be our search space? How can we make sure that we capture the bounds correctly? While discussing this all, we have come to realize that even for the smallest boards it is not visible really quick how big the search space or game strategies will be. The easiest way to grasp a concept is to go with an example and tackle a problem along the way. So here we will discover the number of possible strategies on a 2 by 2 board.

\subsection{Without end game rules}
What we are considering is not an optimal play, so that we can evaluate every possible pure strategy rather than dominant strategies. For the sake of seeing the bigger picture, we will first make an assumption; a game is not over unless the board is filled. On a 2 by 2 board this means there will be exactly 4 moves executed.

\subsubsection*{First move: $b_1$}
The first move has no rejection possibility therefore the move will for sure go through. Since we do not care about the win at the moment (we only care about filling the board) we won't be checking the cells separately as advantageous or not. We also will ignore isomorphism. These conditions give us equally important 4 cells on the board. So Black's first move can be on any of these cells, and since all of them have the same value for us, we will examine only one, and results will multiply accordingly. We will call the first Black move $b_1$. Let's call Black's information state $B$ and White's information state $W$.

\begin{align}
	B &= \{b_1\} \nonumber\\
	W &= \{\} \nonumber
\end{align}

\subsubsection*{Second move: $w_1$}
The second move divides into two; if white hits the $b_1$ or not. They both will have three possible moves (hits $b_1$, and moves; or moves one of the other three cells). The information state differs depending on the rejection happening or not, therefore the two moves will have different continuations, let's call the strategy with rejection $S_r$ and without rejection $S_n$. 

\begin{align}
	B_{S_r} &= \{b_1\}\nonumber \\
	W_{S_r} &= \{b_1, w_1\} &\text{or}\nonumber \\
	W_{S_n} &= \{w_1\} \nonumber
\end{align}

\subsubsection*{Third move: $b_2$}
The third move is the same as the second move, only this time for black. Black will make its move either finding $w_1$ or making a move directly. Gives us 2 move possibilities for each.

\begin{align}
	B_{S_r(1)} &= \{b_1, b_2\} &\text{or} \nonumber\\
	B_{S_r(2)} &= \{b_1, w_1, b_2\} \nonumber\\
	W_{S_r} &= \{b_1, w_1\} \nonumber
\end{align}

\subsubsection*{Last move: $w_2$}
The last move is where it gets a little more complicated. Depending on what white's prior knowledge is, we have to have separate the results. There are 5 possible $W$'s for the strategy $S_n$ and 2 for $S_r$.

\begin{align}
	W_{S_n} &= \{w_1, w_2\} &\text{or}\nonumber\\
	W_{S_n} &= \{w_1, b_1, w_2\} &\text{or}\nonumber\\
	W_{S_n} &= \{w_1, b_2, w_2\} &\text{or}\nonumber\\
	W_{S_n} &= \{w_1, b_1, b_2, w_2\} &\text{or}\nonumber\\
	W_{S_n} &= \{w_1, b_2, b_1, w_2\} \nonumber
\end{align}

\begin{align}
	W_{S_r} &= \{b_1, w_1, w_2\}&\text{or}\nonumber\\
	W_{S_r} &= \{b_1, w_1, b_2, w_2\} \nonumber
\end{align}

So we have; 

\begin{align}
	4\times3\times(2\times2)\times5 &+ \nonumber\\ 4\times3\times(2\times2)\times2 &= 336 \nonumber
\end{align}

Here we have two products; one for $S_n$ and one for $S_r$, which are the same for the prior part since the only difference is on the second move where white either hits the black stone or not, and there are 3 different moves for both cases. We have resulted that 336 is the maximum number of games if we assume that the game doesn't end until the board is full. Now let's prune this tree by adding the end game rules.

\subsection{With end game rules}

It is a bit more manual to calculate the number of games when including the rules. We will examine the moves considering isomorphic properties, which will allow us to calculate the games as a whole when we can benefit. For the initial move for example we have 4 moves, but 2 isomorphic positions (0 is the same as 3, and 1 is the same as 2). So for the first move, we will only consider two positions -close corner(2) and far corner(0)-.

\subsubsection{First move to far corner}

We have two far corners, and they are isomorphic. That's why investigating one and multiplying the result by 2 is going to suffice.
Let's assume we moved to 0 as the first move.

\begin{itemize}
    \item \textbf{Second move to 1} We have two options after this move, either black finishes the game by moving to 2 or game goes to 4 moves if black goes for cell 3.
    \begin{itemize}
        \item B win ${1 \choose 1}{2 \choose 1}{2 \choose 1}$
        \item B loss ${1 \choose 1}{1 \choose 1}{2 \choose 1}{7 \choose 1}$
    \end{itemize}
    \item \textbf{Second move to 2} Here it's easy to see that white will win no matter what black's last move is. This means this branch will expand all the way down (4 moves).
    \begin{itemize}
        \item B loss ${1 \choose 1}{1 \choose 1}{4 \choose 1}{7 \choose 1}$
    \end{itemize}
    \item \textbf{Second move to 3} We have again win-loss chance for both players. If black moves 2, it's a win (3 moves game) if not it will be a full branching (4 moves).
    \begin{itemize}
        \item B win   ${1 \choose 1}{2 \choose 1}{2 \choose 1}$
        \item B loss ${1 \choose 1}{1 \choose 1}{2 \choose 1}{7 \choose 1}$
    \end{itemize}
\end{itemize}

In the end for the far corner first move:

$${2 \choose 1}{2 \choose 1} + {2 \choose 1}{7 \choose 1} + {4 \choose 1}{7 \choose 1} + {2 \choose 1}{2 \choose 1} + {2 \choose 1}{7 \choose 1} = 64$$

\subsubsection{First move to close corner}

The same goes here, we will examine only cell 2.

For the second move, white has two different options; either play to the virtual connection black has, or play next to the black move (and lose). So if the branch continues on VC the game might go on and white still has a probability to win, otherwise, the game ends on 3 moves for sure since both moves give black the connection.

\begin{itemize}
    \item \textbf{Second move to VC} If next Black move is to VC black will win, otherwise black let's white to win in a 4 moves game.
    \begin{itemize}
        \item B win ${1 \choose 1}{4 \choose 1}{2 \choose 1}$
        \item B loss ${1 \choose 1}{3 \choose 1}{2 \choose 1}{7 \choose 1}$
    \end{itemize}
    \item \textbf{Second move to 3} Black wins for sure since it owns the virtual connection and either remaining moves result in a win.
    \begin{itemize}
        \item B win ${1 \choose 1}{1 \choose 1}{4 \choose 1}$
    \end{itemize}
\end{itemize}

$${4 \choose 1}{2 \choose 1} + {3 \choose 1}{2 \choose 1}{7 \choose 1} + {4 \choose 1} = 54$$

By the demonstration of every possible game we now see the result as $2 \cdot (64 + 54) = 236$.